package com.example.crowd_tidbits;

import com.google.android.gms.common.ConnectionResult;
import com.google.android.gms.common.GooglePlayServicesUtil;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.GoogleMap.OnMyLocationChangeListener;
import com.google.android.gms.maps.MapFragment;

import android.app.Activity;
import android.app.Dialog;
import android.content.Intent;
import android.location.Location;
import android.location.LocationManager;
import android.os.Bundle;
import android.provider.Settings;
import android.support.v7.app.ActionBarActivity;
import android.widget.Toast;

public class Receive extends Activity implements OnMyLocationChangeListener {
	int status;
	GoogleMap map;
	@Override
	protected void onCreate(Bundle savedInstanceState) {
		// TODO Auto-generated method stub
		super.onCreate(savedInstanceState);
		setContentView(R.layout.receive);
		
		
		try{
            LocationManager service = (LocationManager) getSystemService(LOCATION_SERVICE);
            boolean enabled = service.isProviderEnabled(LocationManager.GPS_PROVIDER);
            if (!enabled) {
                Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                Toast.makeText(this, "Enabled :" + enabled, Toast.LENGTH_SHORT).show();
                startActivity(intent);
            }
        }catch(Exception e){
            e.printStackTrace();
        }

        status = GooglePlayServicesUtil.isGooglePlayServicesAvailable(getBaseContext());
        
        try{
        	initializeLocationVariable();
        }catch(Exception ex){
        	ex.printStackTrace();
        }
		
	}
	
	public void initialise(){
		
	}
	public void onclicks(){
		
	}
	public void initializeLocationVariable(){

        if( status != ConnectionResult.SUCCESS){
            int requestCode = 10;
            Dialog dialog = GooglePlayServicesUtil.getErrorDialog(status, this, requestCode);
            dialog.show();
        }else{

            map = ((MapFragment) getFragmentManager().findFragmentById(R.id.fragId)).getMap();
            map.setMyLocationEnabled(true);
            map.setOnMyLocationChangeListener(this);

        }


    }

	@Override
	public void onMyLocationChange(Location arg0) {
		// TODO Auto-generated method stub
		
	}

}
